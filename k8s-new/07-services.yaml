apiVersion: v1
kind: Service
metadata:
  name: auth-mysql
  namespace: auction
  labels:
    app: auction-microservices
    component: auth-mysql
spec:
  selector:
    app: auction-microservices
    component: auth-mysql
  ports:
  - port: 3306
    targetPort: 3306
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: bid-mysql
  namespace: auction
  labels:
    app: auction-microservices
    component: bid-mysql
spec:
  selector:
    app: auction-microservices
    component: bid-mysql
  ports:
  - port: 3306
    targetPort: 3306
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: listings-mysql
  namespace: auction
  labels:
    app: auction-microservices
    component: listings-mysql
spec:
  selector:
    app: auction-microservices
    component: listings-mysql
  ports:
  - port: 3306
    targetPort: 3306
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: payments-mysql
  namespace: auction
  labels:
    app: auction-microservices
    component: payments-mysql
spec:
  selector:
    app: auction-microservices
    component: payments-mysql
  ports:
  - port: 3306
    targetPort: 3306
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: profile-mysql
  namespace: auction
  labels:
    app: auction-microservices
    component: profile-mysql
spec:
  selector:
    app: auction-microservices
    component: profile-mysql
  ports:
  - port: 3306
    targetPort: 3306
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: nats-streaming
  namespace: auction
  labels:
    app: auction-microservices
    component: nats-streaming
spec:
  selector:
    app: auction-microservices
    component: nats-streaming
  ports:
  - name: client
    port: 4222
    targetPort: 4222
  - name: monitoring
    port: 8222
    targetPort: 8222
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: redis
  namespace: auction
  labels:
    app: auction-microservices
    component: redis
spec:
  selector:
    app: auction-microservices
    component: redis
  ports:
  - port: 6379
    targetPort: 6379
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: jaeger
  namespace: auction
  labels:
    app: auction-microservices
    component: jaeger
spec:
  selector:
    app: auction-microservices
    component: jaeger
  ports:
  - name: ui
    port: 16686
    targetPort: 16686
  - name: http-collector
    port: 14268
    targetPort: 14268
  - name: grpc-collector
    port: 14250
    targetPort: 14250
  - name: agent-udp-1
    port: 6831
    targetPort: 6831
    protocol: UDP
  - name: agent-udp-2
    port: 6832
    targetPort: 6832
    protocol: UDP
  - name: otlp-grpc
    port: 4317
    targetPort: 4317
  - name: otlp-http
    port: 4318
    targetPort: 4318
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: api-gateway
  namespace: auction
  labels:
    app: auction-microservices
    component: api-gateway
spec:
  selector:
    app: auction-microservices
    component: api-gateway
  ports:
  - port: 3001
    targetPort: 3001
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: auth
  namespace: auction
  labels:
    app: auction-microservices
    component: auth
spec:
  selector:
    app: auction-microservices
    component: auth
  ports:
  - port: 3101
    targetPort: 3101
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: bid
  namespace: auction
  labels:
    app: auction-microservices
    component: bid
spec:
  selector:
    app: auction-microservices
    component: bid
  ports:
  - port: 3102
    targetPort: 3102
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: listings
  namespace: auction
  labels:
    app: auction-microservices
    component: listings
spec:
  selector:
    app: auction-microservices
    component: listings
  ports:
  - port: 3103
    targetPort: 3103
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: payments
  namespace: auction
  labels:
    app: auction-microservices
    component: payments
spec:
  selector:
    app: auction-microservices
    component: payments
  ports:
  - port: 3104
    targetPort: 3104
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: profile
  namespace: auction
  labels:
    app: auction-microservices
    component: profile
spec:
  selector:
    app: auction-microservices
    component: profile
  ports:
  - port: 3105
    targetPort: 3105
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: email
  namespace: auction
  labels:
    app: auction-microservices
    component: email
spec:
  selector:
    app: auction-microservices
    component: email
  ports:
  - port: 3106
    targetPort: 3106
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: saga-orchestrator
  namespace: auction
  labels:
    app: auction-microservices
    component: saga-orchestrator
spec:
  selector:
    app: auction-microservices
    component: saga-orchestrator
  ports:
  - port: 3108
    targetPort: 3108
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: expiration
  namespace: auction
  labels:
    app: auction-microservices
    component: expiration
spec:
  selector:
    app: auction-microservices
    component: expiration
  ports:
  - port: 3107
    targetPort: 3107
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: frontend
  namespace: auction
  labels:
    app: auction-microservices
    component: frontend
spec:
  selector:
    app: auction-microservices
    component: frontend
  ports:
  - port: 3000
    targetPort: 3000
  type: ClusterIP
---
# External Services (NodePort for direct access)
apiVersion: v1
kind: Service
metadata:
  name: api-gateway-external
  namespace: auction
  labels:
    app: auction-microservices
    component: api-gateway
    service-type: external
spec:
  selector:
    app: auction-microservices
    component: api-gateway
  ports:
  - port: 3001
    targetPort: 3001
    nodePort: 30001
  type: NodePort
---
apiVersion: v1
kind: Service
metadata:
  name: frontend-external
  namespace: auction
  labels:
    app: auction-microservices
    component: frontend
    service-type: external
spec:
  selector:
    app: auction-microservices
    component: frontend
  ports:
  - port: 3000
    targetPort: 3000
    nodePort: 30000
  type: NodePort
---
apiVersion: v1
kind: Service
metadata:
  name: jaeger-external
  namespace: auction
  labels:
    app: auction-microservices
    component: jaeger
    service-type: external
spec:
  selector:
    app: auction-microservices
    component: jaeger
  ports:
  - port: 16686
    targetPort: 16686
    nodePort: 30686
  type: NodePort
---
